<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.app.inv.mapper.MenuItemMapper">
	
	<select id="loadMenuItem" resultType="com.app.inv.model.MenuItem" parameterType="String">
		select
		omi.code,
		omt.name as type,
		omi.name,
		omi.description,
		omi.price,
		omi.type as typeCode
		from
		oms_menu_item omi
		join
		oms_mi_type omt
		on
		omi.type = omt.code
		<if test="_parameter != null">
            where
            omi.code = #{codeMenuItem}
        </if>
	</select>
	
	<update id="updateMenuItem" parameterType="com.app.inv.model.MenuItem">
		update
		oms_menu_item
		set
		update_date = sysdate(),
		update_user = "pgm", 
		update_program = "MIService", 
		type = #{typeCode}, 
		name = #{name}, 
		description = #{description}, 
		price = #{price} 
		where 
		code = #{code}
	</update>
	
	<select id="loadMenuItemType" resultType="com.app.inv.model.MenuItemType" parameterType="String">
		select
		code,
		name 
		from
		oms_mi_type
		<if test="_parameter != null">
            where
            code = #{code}
        </if>
	</select>
	
	<insert id="saveMenuItemType" parameterType="com.app.inv.model.MenuItemType">
		insert into
		oms_mi_type(
		create_date,
		update_date,
		update_user,
		update_program,
		code,
		name)
		values (
		sysdate(),
		sysdate(),
		"pgm",
		"MIService",
		#{code},
		#{name})
    </insert>
    
    <update id="updateMenuItemType" parameterType="com.app.inv.model.MenuItemType">
    	update
		oms_mi_type
		set
		update_date = sysdate(),
		update_user = "pgm", 
		update_program = "MIService", 
		name = #{name} 
		where 
		code = #{code}
    </update>
    
    <delete id="deleteMenuItemType" parameterType="String">
    	delete from 
        oms_mi_type 
        where 
        code = #{code}
    </delete>
	
	
	
</mapper>